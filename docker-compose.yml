version: '3.8'
services:
  values_db:
    image: tarantool/tarantool:latest
    hostname: values_db
    ports:
      - "3301:3301"
    environment:
      - TARANTOOL_MEMORY_GB=1.0
    volumes:
      - ./migrations/value_store/:/opt/tarantool/
    # healthcheck:
    #   test: ["CMD", "tarantool tarantool_is_up"]
    #   interval: 30s
    #   timeout: 10s
    #   retries: 3
    #   start_period: 10s
    command: tarantool /opt/tarantool/init.lua
  api:
    build: .
    hostname: api
    ports:
      - 8081:8081
    environment:
      - DOCKER_CONFIG_PATH=config/config.toml
